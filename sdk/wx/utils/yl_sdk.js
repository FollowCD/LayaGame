!function () { function t(e) { e.url = e.url || "", e.method = e.method || "get", e.data = e.data || "", e.callback = e.callback || "", e.async = e.async || !0; var t = new XMLHttpRequest; if (l.switchLog && console.log("YLSDK Request--url:" + e.url + ", menthod:" + e.method + ", data:" + JSON.stringify(e.data)), t.open(e.method, e.url, e.async), "post" === e.method && t.setRequestHeader("Content-Type", "application/json"), e.needPass) l.accountPass || console.error("YLSDK AccountPass is null !"), t.setRequestHeader("AccountPass", l.accountPass); else { var o = { platform: l.ylsdk_platform, version: l._SDKversion }; o = c.base64_encode(JSON.stringify(o)), t.setRequestHeader("ClientInfo", o) } t.onerror = function (e) { console.error("YLSDK ", e) }, t.onabort = function (e) { console.exception(e) }, t.onprogress = function (e) { }, t.onreadystatechange = function () { 200 === this.status || console.warn("YLSDK http request status:" + this.status) }, t.onload = function () { var t = this.responseText; e.callback && "function" == typeof e.callback && e.callback(t) }, e.data && e.data.length > 0 && l.switchLog && console.log("YLSDK reqType:" + e.method + " url:" + e.url + " data:" + e.data); try { void 0 == e.data && (e.data = null), t.send(e.data) } catch (t) { console.exception(e.data) } } var o = require("./yl_sdk_conf"); "" === o.ylsdk_app_id && console.error("YLSDK \u8bf7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u586b\u5199\u60a8\u7684\u6e38\u620fAPPID"), "" === o.ylsdk_version && console.error("YLSDK \u8bf7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u586b\u5199\u60a8\u7684\u6e38\u620f\u7248\u672c\u53f7"), console.warn("YLSDK login_by_code = ", o.login_by_code), o.ylsdk_debug_model && console.error("YLSDK \u60a8\u5f53\u524d\u662f\u6d4b\u8bd5\u6a21\u5f0f"), o.ylsdk_app_id = o.ylsdk_app_id.replace(/\s/g, ""), o.ylsdk_version = o.ylsdk_version.replace(/\s/g, ""); for (var n = ["ylInitSDK", "ylSideBox", "ylIntegralWall", "ylGetBoardAward", "ylStatisticResult", "ylShareCard", "ylEventCount", "ylGetAppID", "ylGetSignData", "ylFetchSign", "ylGetInviteAccount", "ylGetUserInfo", "ylGetSwitchInfo", "ylSetCurScene", "ylGetCustom", "ylNavigateToMiniProgram", "ylGetUserWXInfo", "ylUserInfoButtonShow", "ylUserInfoButtonHide", "ylBannerAdCreate", "ylBannerAdCreateSmall", "ylBannerAdShow", "ylBannerAdHide", "ylCreateVideoAd", "ylShowVideoAd", "ylLog", "ylGetLeftTopBtnPosition", "ylStatisticViedo", "ylShareAppMessage", "ylShowShareOrVideo", "ylCreateGridAd", "ylShowGridAd", "ylHideGridAd", "ylCreateInterstitialAd", "ylShowInterstitialAd", "ylStatisticShareCard", "ylStoreValue"], s = { ylInitSDK: function (e) { console.log("YLSDK ---\u521d\u59cb\u5316SDK---"), r.login(e) }, ylSideBox: function (e) { r.SideBox(e) }, ylIntegralWall: function (e) { r.IntegralWall(e) }, ylGetBoardAward: function (e, o) { e ? t({ method: "post", url: l.domain_online + "/gamebase/getboardaward", needPass: !0, data: { module: "scoreboard", awardId: e }, callback: function (e) { var t = JSON.parse(e); c.res_log("Response--getboardaward:", t.code, e), 0 != t.code && 9002 === (t = !1).code && a.loginWX(), o && o(t.result.award) } }) : console.error("\u8bf7\u4f20\u9886\u53d6\u5956\u52b1\u7684\u79ef\u5206\u5899ID") }, ylStatisticResult: function (e, t) { var o = { detail: e }; r.statisticResult(o, t) }, ylStatisticViedo: function (e, t, o) { var n = { scene: l.layer, adId: t, type: e }; r.statisticViedo(n, o) }, ylShareCard: function (e) { l.sharecard_config || (l.sharecard_config = new Map), l.sharecard_config.has(l.layer) ? e && e(!0) : t({ method: "post", url: l.domain_online + "/gamebase/sharecard", needPass: !0, data: { scene: l.layer }, callback: function (t) { var o = JSON.parse(t); c.res_log("Response--sharecard:", o.code, t), 0 == o.code ? (o.result && o.result.length > 0 && (l.sharecard_config.set(l.layer, o.result), a.initShareMenu()), e && (l.sharecard_config.has(l.layer) ? e(l.sharecard_config.get(l.layer)) : e(!1))) : r.sharecardFinal(e) } }) }, ylShareAppMessage: function (e) { var t = null; if (l.layer && (l.sharecard_config && l.sharecard_config.has(l.layer) ? t = l.sharecard_config.get(l.layer) : l.switchLog && console.warn("YLSDK --\u5f53\u524d\u573a\u666f\u6ca1\u6709\u5206\u4eab\u56fe,\u8bf7\u914d\u7f6e---"), t && t.length > 0)) { wx.ylEventCount("Click-Share"); var o = t[Math.floor(Math.random() * t.length)], n = "account_id=" + c.getAccountId() + "&sharecard_id=" + o.id + "&from=stage_invite"; wx.shareAppMessage({ title: o.title, imageUrl: o.img, query: n }), l.show_share = !0, l.shareCallBack = e, l.onShare = { shareId: o.id, showTime: (new Date).getTime() }, s.ylStatisticShareCard(o.id), s.ylEventCount("share") } }, ylStatisticShareCard: function (e) { var t = { sharecardId: e }; r.statisticShareCard(t) }, ylStoreValue: function (e, o) { t({ method: "post", url: l.domain_online + "/gamebase/store/value", needPass: !0, data: e, callback: function (t) { var n = JSON.parse(t); c.res_log("Response--store/value--" + e.name + ":", n.code, t); e.name, e.cmd && e.cmd; 9002 === n.code && a.loginWX(), 0 == n.code && n.result ? o && o(n.result) : o && o(!1) } }) }, ylShowShareOrVideo: function (e, t, o) { if (e) if (t) if (l.moduleList && l.moduleList.length > 0) { var n = !1; l.moduleList.forEach(function (s) { if (s.channel == e && s.module == t && s && s.logicJson) { n = !0; var i = s.logicJson; if (i.pe && i.pe.length > 0) { var a = s.logicJson.pe.shift(); 1 == a ? (o && o(a), l.switchLog && console.log("-----\u5206\u4eab", JSON.stringify(i))) : (o && o(2), l.switchLog && console.log("-----\u89c6\u9891", JSON.stringify(i))) } else if (i.loop && i.loop.length > 0 && i.time && i.time > 0) { var r = i.loop[s.loopIndex]; s.loopIndex += 1, s.loopIndex >= i.loop.length && (s.loopIndex = 0, s.logicJson.time -= 1), 1 == r ? (o && o(r), l.switchLog && console.log("----2-\u5206\u4eab", JSON.stringify(i))) : (o && o(2), l.switchLog && console.log("----2-\u89c6\u9891", JSON.stringify(i))) } else o && o(0), l.switchLog && console.error("-----\u7b56\u7565\u5df2\u7ecf\u7528\u5b8c\u4e86") } }), n || (o && o(0), l.switchLog && console.error("-----\u6ca1\u6709\u89c6\u9891\u5206\u4eab\u7b56\u75651")) } else o && o(0), l.switchLog && console.error("-----\u6ca1\u6709\u89c6\u9891\u5206\u4eab\u7b56\u75652"); else console.error("YLSDK ylShowShareOrVideo--module is null"); else console.error("YLSDK ylShowShareOrVideo--channel is null") }, ylEventCount: function (e) { if (0 !== l.switchInfo.switchEvent) { var t = l.layer ? l.layer : "default"; l.statistics.events.push({ event: e, scene: t, time: (new Date).getTime() }) } else l.switchLog && console.warn("YLSDK \u505c\u7528\u4e8b\u4ef6\u7edf\u8ba1\u63a5\u53e3\uff01") }, ylGetCustom: function (e) { l.custom ? e && e(l.custom) : t({ method: "get", url: l.domain_online + "/gamebase/customconfig", needPass: !0, callback: function (t) { var o = JSON.parse(t); c.res_log("Response--customconfig:", o.code, t), 0 == o.code ? (o.result && o.result.length > 0 && (l.custom = o.result, o.result.forEach(function (e) { "sharing_strategy" == e.name && e.value && "" != e.value && (l.sharingStrategy = e, l.sharingStrategy.value = JSON.parse(e.value), l.sharingStrategy.strategy_id = 0, l.sharingStrategy.time_id = 0, l.sharingStrategy.count = 0, l.switchLog && console.log("YLSDK sharing_strategy:", l.sharingStrategy)), "banner_time_space" == e.name && e.value && "" != e.value && (l.banner_time_space = Number(e.value), l.switchLog && console.log("YLSDK banner_time_space:", l.banner_time_space)) })), e && e(o.result)) : r.customconfigFinal(e) } }) }, ylSetCurScene: function (e) { l.layer = e, console.log("---ylSetCurScene-sceneName:", l.layer) }, ylGetSignData: function (e) { r.GetSignData(e) }, ylFetchSign: function (e, n) { t({ method: "get", url: l.domain_online + "/fetchsign", needPass: !0, data: { appid: o.ylsdk_app_id, account_id: l._AccountId, module: "sign", id: e }, callback: function (e) { var t = JSON.parse(e); c.res_log("Response--fetchsign:", t.code, e), 9002 === t.code && a.loginWX(), n && n(e) } }) }, ylNavigateToMiniProgram: function (e, t) { if (e._id) { e.type || (e.type = "0"); var n = l.layer ? l.layer : "default"; if (n += "_" + e.source, "" + e.type == "0") { if (!e.toAppid) return void console.error("YLSDK toAppid is null !"); wx.navigateToMiniProgram({ appId: e.toAppid, path: e.toUrl || "", extraData: { appid: o.ylsdk_app_id }, success: function () { l.switchLog && console.log("YLSDK \u5c0f\u6e38\u620f\u8df3\u8f6c-\u8df3\u8f6c\u6210\u529f\uff01"), r.ClickOut(e._id, e.toAppid, n, !0), c.removeItemFrom(e.toAppid), t && t(!0) }, fail: function () { l.switchLog && console.log("YLSDK \u5c0f\u6e38\u620f\u8df3\u8f6c-\u8df3\u8f6c\u5931\u8d25\uff01"), r.ClickOut(e._id, e.toAppid, n, !1), t && t(!1) } }) } else e.showImage || console.error("YLSDK showImage is null !"), r.ClickOut(e._id, e.toAppid, n, !1), wx.previewImage({ urls: [e.showImage] }); s.ylEventCount(n) } else console.error("YLSDK id is null !") }, ylGetAppID: function () { return o.ylsdk_app_id }, ylGetInviteAccount: function () { return l.invite_account }, ylGetUserInfo: function () { return l.loginInfo }, ylGetSwitchInfo: function () { return l.switchInfo }, ylGetUserWXInfo: function () { var e = l.user_wx_info; return e || (e = c.getUserWXInfo()), l.user_wx_info = "" == e ? null : JSON.parse(e), l.user_wx_info }, ylUserInfoButtonShow: function (e, t) { a.showUserInfoButton(e, t) }, ylUserInfoButtonHide: function () { a.hideUserInfoButton() }, ylBannerAdCreate: function (e) { a.createBannerAd(!1), e && a.showBannerAd() }, ylBannerAdCreateSmall: function (e) { a.createBannerAd(!0), e && a.showBannerAd() }, ylBannerAdShow: function () { a.showBannerAd() }, ylBannerAdHide: function () { a.hideBannerAd() }, ylCreateVideoAd: function () { a.createVideoAd() }, ylShowVideoAd: function (e) { a.showVideoAd(e) }, ylLog: function (e, t) { l.switchLog && ("log" === (t = t || "log") ? console.log(e) : "info" === t ? console.info(e) : "error" === t ? console.error(e) : "warn" === t ? console.warn(e) : "debug" === t && console.debug(e)) }, ylGetLeftTopBtnPosition: function () { var e = wx.getMenuButtonBoundingClientRect(), t = cc.director.getWinSize(), o = wx.getSystemInfoSync(), n = t.height / o.screenHeight, s = t.width / o.screenWidth, i = e.height * n, a = e.width * s, r = t.height / 2 - (e.top + e.height / 2) * n, c = (o.screenWidth - e.right) * s - t.width / 2; return l.switchLog && console.log("---ylGetLeftTopBtnPosition-height\uff1a" + i + ",width\uff1a" + a + ",x\uff1a" + c + ",y\uff1a" + r), { x: c, y: r, width: a, height: i } }, ylCreateGridAd: function (e) { var t = Math.floor(Math.random() * o.ylsdk_grid_ids.length), n = o.ylsdk_grid_ids[t]; l.gridAd ? l.gridAd && (l.gridAd.adUnitId = n) : (l.gridAd = wx.createGridAd({ adUnitId: n, adTheme: e.adTheme, gridCount: e.gridCount, style: e.style }), l.gridAd.id_index = t, l.gridAd.onLoad(function () { l.switchLog && console.log("YLSDK ---GridAd.onLoad") }), l.gridAd.onError(function (e) { l.switchLog && console.warn("YLSDK ---GridAd.onError:", e, l.gridAd.adUnitId) })), e.show && s.ylShowGridAd() }, ylShowGridAd: function () { l.gridAd && (l.gridAd.show().catch(function (e) { l.switchLog && console.log("YLSDK ---GridAd.show") }), s.ylEventCount("showGridAd")) }, ylHideGridAd: function () { console.log("YLSDK ---\u9690\u85cf\u683c\u5b50\u5e7f\u544a"), l.gridAd && l.gridAd.hide().catch(function (e) { l.switchLog && console.log("YLSDK ---GridAd.hide") }) }, ylCreateInterstitialAd: function (e) { if (wx.createInterstitialAd) { var t = Math.floor(Math.random() * o.ylsdk_interstitial_ids.length), n = o.ylsdk_interstitial_ids[t]; l.interstitialAd ? l.interstitialAd && (l.interstitialAd.adUnitId = n) : (l.interstitialAd = wx.createInterstitialAd({ adUnitId: n }), l.interstitialAd.id_index = t, l.interstitialAd.onLoad(function () { l.switchLog && console.log("YLSDK ---InterstitialAd.onLoad") }), l.interstitialAd.onError(function (e) { l.switchLog && console.warn("YLSDK ---InterstitialAd.onError:", e, l.interstitialAd.adUnitId) })), e && s.ylShowInterstitialAd() } }, ylShowInterstitialAd: function () { l.interstitialAd && (l.interstitialAd.show().catch(function (e) { l.switchLog && console.log("YLSDK ---InterstitialAd.show") }), s.ylEventCount("showInterstitialAd")) } }, i = 0; i < n.length; i++)!function (e, t) { Object.defineProperty(wx, e, { value: t, writable: !1, enumerable: !0, configurable: !0 }) }(n[i], s[n[i]]); var a = { saveLocalData: function (e, t) { wx.setStorage({ key: e, data: t }) }, getLocalData: function (e) { try { var t = wx.getStorageSync(e); return null != t && void 0 !== t && "undefined" !== t && "" !== t || (t = ""), t } catch (t) { console.error("YLSDK getLocalData error key:" + e + ", e:", t) } return "" }, loginWX: function (e) { wx.login({ success: function (t) { var o = { code: t.code, needPass: !1 }; l.loginInfo ? l.loginInfo.code = t.code || "" : l.loginInfo = { code: t.code || "" }, console.log("YLSDK ---loginInfo:", JSON.stringify(l.loginInfo)), l.switchLog && console.log("YLSDK --wx.login-\u767b\u5f55\u6210\u529f:", t), r.loginSDKServer(o, e) }, fail: function (t) { l.switchLog && console.error("YLSDK --wx.login-\u767b\u5f55\u5931\u8d25", t), e && e(!1) } }) }, getLaunchOptionsSync: function () { var e = wx.getLaunchOptionsSync(); return l.switchLog && console.log("YLSDK ---wx.getLaunchOptionsSync\uff1a", JSON.stringify(e)), e }, showUserInfoButton: function (e, t) { l.switchLog && console.log("YLSDK ------\u9690\u85cf\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6309\u94ae"), l.userInfoBtn || (l.userInfoBtn = wx.createUserInfoButton(e)), l.userInfoBtn.onTap(function (e) { l.switchLog && console.log("YLSDK ------\u70b9\u51fb\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6309\u94ae:", e), a.getUserInfo(t) }), l.userInfoBtn.show() }, hideUserInfoButton: function () { l.switchLog && console.log("YLSDK ------\u9690\u85cf\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6309\u94ae"), l.userInfoBtn && l.userInfoBtn.hide() }, getUserInfo: function (e) { wx.getUserInfo({ withCredentials: !1, lang: "zh_CN", success: function (t) { l.switchLog && console.log("YLSDK wx.getUserInfo--success:", JSON.stringify(t)), t.userInfo && (l.user_wx_info = t.userInfo, c.saveUserWXInfo(JSON.stringify(l.user_wx_info)), r.Edit(l.user_wx_info)), e && e(l.user_wx_info) }, fail: function (t) { l.switchLog && console.error("YLSDK wx.getUserInfo--fail:", JSON.stringify(t)), e && e() } }) }, createBannerAd: function (e) { var t = Math.floor(Math.random() * o.ylsdk_banner_ids.length), n = o.ylsdk_banner_ids[t]; l.bannerAd && l.bannerAd.destroy(); var s = e ? 300 : d.ww, i = (d.ww - s) / 2; l.bannerAd = wx.createBannerAd({ adUnitId: n, adIntervals: 35, style: { left: i, top: d.wh - .28695 * d.ww, width: s } }), l.switchLog && console.log("YLSDK wx.createBannerAd:", n, l.bannerAd.style.realWidth, l.bannerAd.style.realHeight, l.bannerAd.style.top), l.bannerAd.onLoad(function () { l.switchLog && console.log("YLSDK wx.createBannerAd---onLoad \u5e7f\u544a\u52a0\u8f7d\u6210\u529f") }), l.bannerAd.onError(function (e) { l.switchLog && console.warn("YLSDK wx.createBannerAd---onError:", e) }), l.bannerAd.onResize(function (e) { l.bannerAd.style.top = d.wh - e.height, l.switchLog && console.log("YLSDK wx.createBannerAd---onResize:", l.bannerAd.style.realWidth, l.bannerAd.style.realHeight, l.bannerAd.style.top) }) }, showBannerAd: function () { l.switchLog && console.log("YLSDK ---BannerAd.show"), l.bannerAd && l.bannerAd.show(), l.show_banner = !0, s.ylEventCount("showBannerAd") }, hideBannerAd: function () { l.switchLog && console.log("YLSDK ---BannerAd.hide"), l.bannerAd && l.bannerAd.hide(), l.show_banner = !1 }, createVideoAd: function () { var e = Math.floor(Math.random() * o.ylsdk_video_ids.length), t = o.ylsdk_video_ids[e]; if (l.videoAd) { if (l.videoAd.adUnitId === t) return; l.videoAd.adUnitId = t } else l.videoAd = wx.createRewardedVideoAd({ adUnitId: t }), l.videoAd.adUnitId = t, l.videoAd.id_index = e, l.videoAd.onLoad(function () { l.switchLog && console.log("YLSDK ---RewardedVideoAd.onLoad") }), l.videoAd.onClose(function (e) { l.show_video = !1, e && e.isEnded || void 0 === e ? (l.switchLog && console.log("YLSDK \u89c6\u9891\u64ad\u653e\u5b8c\u6210", l.videoAd.adUnitId), l.onVideoClose && l.onVideoClose(l.VIDEO_PLAY_FINISH), s.ylStatisticViedo(1, l.videoAd.adUnitId)) : (l.onVideoClose && l.onVideoClose(l.VIDEO_PLAY_CANCEL), l.switchLog && console.warn("YLSDK \u89c6\u9891\u64ad\u653e\u53d6\u6d88")) }), l.videoAd.onError(function (e) { l.switchLog && console.warn("YLSDK ---RewardedVideoAd.onError:", e, l.videoAd.adUnitId), l.onVideoClose && l.onVideoClose(l.VIDEO_PLAY_FAIL), l.show_video = !1 }); console.error("-----------videoAd.id_index:", l.videoAd.id_index) }, showVideoAd: function (e) { l.show_video = !0, l.videoAd || a.createVideoAd(), s.ylStatisticViedo(0, l.videoAd.adUnitId), l.onVideoClose = e; var t = !1; l.videoAd.load().then(function () { t || (t = !0, l._timer && (clearTimeout(l._timer), l._timer = null), l.videoAd.show().then(function () { l.switchLog && console.log("YLSDK \u89c6\u9891\u64ad\u653e\u6210\u529f", l.videoAd.adUnitId) }).catch(function (t) { l.switchLog && console.warn("YLSDK \u89c6\u9891\u64ad\u653e\u5931\u8d25", l.videoAd.adUnitId), e && e(l.VIDEO_PLAY_FAIL), l.show_video = !1 })) }).catch(function (o) { l.show_video = !1, t || (l.switchLog && console.warn("YLSDK \u89c6\u9891\u52a0\u8f7d\u5931\u8d25\u5566\uff01", l.videoAd.adUnitId), t = !0, l._timer && (clearTimeout(l._timer), l._timer = null), e && e(l.VIDEO_PLAY_FAIL)) }), l._timer || (l._timer = setTimeout(function () { l._timer = null, l.show_video = !1, t || (l.switchLog && console.warn("YLSDK 4\u79d2\u5185\u65e0\u89c6\u5c4f\u56de\u8c03\uff0c\u81ea\u52a8\u56de\u8c03\u52a0\u8f7d\u5931\u8d25", l.videoAd.adUnitId), t = !0, e && e(l.VIDEO_PLAY_FAIL)) }, 4e3)), s.ylEventCount("showVideoAd") }, initShareMenu: function () { wx.showShareMenu({ success: function (e) { }, fail: function (e) { }, complete: function (e) { } }), wx.onShareAppMessage(function () { l.show_share = !0; var e = {}; if (!l.layer || !l.sharecard_config) return e; var t = l.sharecard_config.get(l.layer); if (!t && t.length > 0) { var o = t[0], n = "account_id=" + c.getAccountId() + "&sharecard_id=" + o.id + "&from=stage_invite"; e.title = o.title, e.imageUrl = o.img, e.query = n } return s.ylEventCount("share_menu"), e }) } }, r = { statisticsEvents: function (e, o) { var n = { events: e }; t({ method: "post", url: l.domain_online + "/statistics/event", needPass: !0, data: n, callback: function (t) { var n = JSON.parse(t); if (c.res_log("Response--event:", n.code, t), 0 === n.code) o && c.clearLocalStatisticsEvents(); else for (var s = 0; s < e.length; s++)l.statistics.events.unshift(e.pop()); 9002 === n.code && a.loginWX() } }) }, statisticViedo: function (e, o) { 0 !== l.switchInfo.switchVideo ? t({ method: "post", url: l.domain_online + "/statistics/video", needPass: !0, data: e, callback: function (t) { var n = JSON.parse(t); c.res_log("Response--video:", n.code, t), 0 != n.code && l.statistics.video.push(e), 9002 === n.code && a.loginWX(), o && o(t) } }) : l.switchLog && console.warn("YLSDK \u505c\u7528\u89c6\u9891\u7edf\u8ba1\u63a5\u53e3\uff01") }, statisticResult: function (e, o) { 0 !== l.switchInfo.switchResult ? t({ method: "post", url: l.domain_online + "/statistics/result", needPass: !0, data: e, callback: function (t) { var n = JSON.parse(t); c.res_log("Response--result:", n.code, t), 0 != n.code && l.statistics.result.push(e), 9002 === n.code && a.loginWX(), o && o(0 === n.code) } }) : l.switchLog && console.warn("YLSDK \u505c\u7528\u7ed3\u679c\u7edf\u8ba1\u63a5\u53e3\uff01") }, GetSignData: function (e) { l.signConfig ? e && e(l.signConfig) : t({ method: "get", url: l.domain_online + "/gamebase/getsigndata", needPass: !0, data: { appid: o.ylsdk_app_id, account_id: l._AccountId, module: "sign" }, callback: function (t) { var o = JSON.parse(t); c.res_log("Response--getsigndata:", o.code, t), 9002 === o.code && a.loginWX(), 0 == o.code && o.signconfig && (l.signConfig = o), e && e(o) } }) }, loginSDKServer: function (e, t) { r.loginServer(e, function (o) { var n = JSON.parse(o); 0 === n.code ? (l.loginInfo = { accountId: n.result.accountId, nickName: n.result.nickName || "", avatarUrl: n.result.avatarUrl || "", newPlayer: 0 !== n.result.newPlayer ? 1 : 0, openid: n.result.openid || "", code: e.code || "" }, console.log("YLSDK ---loginInfo:", JSON.stringify(l.loginInfo)), n.result.accountId && c.SetAccountID(n.result.accountId), n.result.accountPass && c.SetAccountPass(n.result.accountPass), n.result.isLowVersion && 1 === n.result.isLowVersion && (console.error("/*****************************************/"), console.error("**  YLSDK \u60a8\u7684SDK\u7248\u672c\u8fc7\u4f4e\uff0c\u8bf7\u5c3d\u5feb\u5347\u7ea7SDK  **"), console.error("/*****************************************/")), l.switchLog = 1 === n.result.switchLog, l.switchInfo = { switchTouch: n.result.switchTouch || 0, switchPush: n.result.switchPush || 0, switchLog: n.result.switchLog || 0 }, l.switchInfo.switchLogin = 0 === n.result.switchLogin ? n.result.switchLogin : 1, l.switchInfo.switchJump = 0 === n.result.switchJump ? n.result.switchJump : 1, l.switchInfo.switchShare = 0 === n.result.switchShare ? n.result.switchShare : 1, l.switchInfo.switchEvent = 0 === n.result.switchEvent ? n.result.switchEvent : 1, l.switchInfo.switchLayer = 0 === n.result.switchLayer ? n.result.switchLayer : 1, l.switchInfo.switchResult = 0 === n.result.switchResult ? n.result.switchResult : 1, l.switchInfo.switchVideo = 0 === n.result.switchVideo ? n.result.switchVideo : 1, l.need_statistics_on_show && (l.lastTime = (new Date).getTime(), l.need_statistics_on_show = !1), n.result.moduleList && n.result.moduleList.length > 0 && (l.moduleList = n.result.moduleList, l.moduleList.forEach(function (e) { e.loopIndex = 0, e.logicJson && (e.logicJson = JSON.parse(e.logicJson)) })), r.SideBox(), r.IntegralWall(), console.log("YLSDK ---SDK\u521d\u59cb\u5316\u5b8c\u6210--switchInfo:", l.switchInfo), t && t(!0)) : l.login_count < 3 ? (c.SetAccountPass(""), r.login(t)) : (console.error("YLSDK ---SDK\u521d\u59cb\u5316\u5931\u8d25--"), t && t(!1)) }) }, loginServer: function (e, n) { var s = a.getLaunchOptionsSync(), i = {}; s.scene && (i.scene = s.scene), s.query && (i.query = JSON.stringify(s.query), 1005 != parseInt(s.scene) && 1006 != parseInt(s.scene) && 1037 != parseInt(s.scene) && 1035 != parseInt(s.scene) && "{}" != i.query && (s.query.sharecard_id && (i.sharecardId = s.query.sharecard_id), s.query.account_id && (i.accountId = s.query.account_id, l.invite_account = s.query.account_id), s.query.from && (i.from = s.query.from))); var r = { platform: l.ylsdk_platform || "", appid: o.ylsdk_app_id, version: o.ylsdk_version, pkgName: l.ylsdk_pkg_name, shareInfo: i }; e.code && (r.code = e.code), l.switchLog && console.log("YLSDK ---\u767b\u5f55SDK\u670d\u52a1\u5668-\u8bf7\u6c42:", JSON.stringify(r)), t({ method: "post", url: l.domain_online + "/user/login", needPass: e.needPass, data: r, callback: function (e) { var t = JSON.parse(e); c.res_log("Response--login:", t.code, e), n && n(e) } }) }, login: function (e) { l.login_count += 1; var t = c.getAccountPass(); if (0 !== l.switchInfo.switchLogin) if (o.login_by_code || !t || "" === t) l.switchLog && console.log("YLSDK ---\u901a\u8fc7\u5fae\u4fe1code\u767b\u5f55"), a.loginWX(e); else { l.accountPass = t, l.switchLog && console.log("YLSDK ---\u901a\u8fc7accountPass\u767b\u5f55"); r.loginSDKServer({ needPass: !0 }, e) } else l.switchLog && console.warn("YLSDK \u8be5\u6e38\u620f\u88ab\u7981\u6b62\uff01") }, Edit: function (e) { t({ method: "post", url: l.domain_online + "/user/info/edit", needPass: !0, data: { nickName: e.nickName, headimgurl: e.avatarUrl, gender: e.gender, language: e.language, province: e.province, city: e.city, country: e.country }, callback: function (e) { var t = JSON.parse(e); c.res_log("Response--edit\uff1a", t.code, e), 9002 === t.code && a.loginWX() } }) }, SideBox: function (e) { l.boxconfig ? e && e(l.boxconfig) : t({ method: "get", url: l.domain_online + "/gamebase/sidebox", needPass: !0, callback: function (t) { var o = JSON.parse(t); if (c.res_log("Response--sidebox:", o.code, t), 0 === o.code && o.result) { c.checkJumpOutTime(), l.boxconfig = o.result; var n = c.getJumpOutInfo(), s = "" !== n && JSON.parse(n); if (s && s.list && s.list.length > 0) for (var i = 0; i < s.list.length; i++)for (var a = s.list[i].appid, d = 0; d < l.boxconfig.length; d++) { var u = l.boxconfig[d].toAppid; u == a && (l.switchLog && console.log("YLSDK \u5220\u9664\u5df2\u7ecf\u70b9\u8fc7\u7684\u5356\u91cf\u9879:", l.boxconfig[d]._id, u), l.boxconfig.splice(d, 1)) } e && e(l.boxconfig) } else r.newestsideboxFinal(e) } }) }, newestsideboxFinal: function (e) { t({ method: "get", url: l.domain_online + "/gamebase/sidebox/final?appid=" + o.ylsdk_app_id + "&version=" + o.ylsdk_version, needPass: !1, callback: function (t) { var o = JSON.parse(t); if (c.res_log("Response--sidebox-final:", o.code, t), 9002 === o.code && a.loginWX(), c.checkJumpOutTime(), 0 === o.code && o.result) { l.boxconfig = o.result; var n = c.getJumpOutInfo(), s = "" !== n && JSON.parse(n); if (s && s.list && s.list.length > 0) for (var i = 0; i < s.list.length; i++)for (var r = s.list[i].appid, d = 0; d < l.boxconfig.length; d++) { var u = l.boxconfig[d].toAppid; u == r && (l.switchLog && console.log("YLSDK \u5220\u9664\u5df2\u7ecf\u70b9\u8fc7\u7684\u5356\u91cf\u9879-final:", l.boxconfig[d]._id, u), l.boxconfig.splice(d, 1)) } } e && e(l.boxconfig) } }) }, IntegralWall: function (e) { t({ method: "post", url: l.domain_online + "/gamebase/scoreboard", needPass: !0, data: { module: "scoreboard" }, callback: function (t) { var o = JSON.parse(t); c.res_log("Response--scoreboard:", o.code, t), 0 == o.code && o.result ? (o.result && (l.boardconfig = o.result), e && e(l.boardconfig)) : r.newestscoreboardFinal(e) } }) }, newestscoreboardFinal: function (e) { t({ method: "get", url: l.domain_online + "/gamebase/scoreboard/final?appid=" + o.ylsdk_app_id + "&version=" + o.ylsdk_version, needPass: !1, data: { module: "scoreboard" }, callback: function (t) { var o = JSON.parse(t); c.res_log("Response--scoreboard-final:", o.code, t), 9002 === _data.code && a.loginWX(), 0 == o.code && o.result && o.result && (l.boardconfig = o.result), e && e(o) } }) }, customconfigFinal: function (e) { t({ method: "get", url: l.domain_online + "/gamebase/customconfig/final?appid=" + o.ylsdk_app_id + "&version=" + o.ylsdk_version, needPass: !1, callback: function (t) { var o = JSON.parse(t); c.res_log("Response--customconfig-final:", o.code, t), 9002 === o.code && a.loginWX(), 0 == o.code && o.result && o.result.length > 0 && (l.custom = o.result, o.result.forEach(function (e) { "sharing_strategy" == e.name && e.value && "" != e.value && (l.sharingStrategy = e, l.sharingStrategy.value = JSON.parse(e.value), l.sharingStrategy.strategy_id = 0, l.sharingStrategy.time_id = 0, l.sharingStrategy.count = 0, l.switchLog && console.log("YLSDK sharing_strategy:", l.sharingStrategy)) })), e && e(o.result) } }) }, sharecardFinal: function (e) { t({ method: "get", url: l.domain_online + "/gamebase/sharecard/final?appid=" + o.ylsdk_app_id + "&version=" + o.ylsdk_version, needPass: !1, data: { scene: l.layer }, callback: function (t) { var o = JSON.parse(t); c.res_log("Response--sharecard-final:", o.code, t), 9002 === o.code && a.loginWX(), 0 == o.code && o.result && o.result.length > 0 && (l.sharecard_config.set(l.layer, o.result), a.initShareMenu()), e && (l.sharecard_config.has(l.layer) ? e(l.sharecard_config.get(l.layer)) : e(!1)) } }) }, commitStaticsLayer: function () { if (l._AccountId) if (l.layer) { var e = { layer: l.layer || "default" }; r.statisticsLayer(e) } else console.error("YLSDK yl_sdk-ccommitStaticsLayer : layer is null !"); else console.error("YLSDK yl_sdk-commitStaticsLayer : _AccountId is null !") }, statisticsLayer: function (e) { 0 !== l.switchInfo.switchLayer ? t({ method: "post", url: l.domain_online + "/statistics/layer", needPass: !0, data: e, callback: function (t) { var o = JSON.parse(t); c.res_log("Response--layer:", o.code, t), 0 != o.code && l.statistics.layer.push(e), 9002 === o.code && a.loginWX() } }) : l.switchLog && console.warn("YLSDK \u505c\u7528\u6d41\u5931\u7edf\u8ba1\u63a5\u53e3\uff01") }, commitStaticsErrStack: function (e, n) { var s = { appid: o.ylsdk_app_id, version: o.ylsdk_version, language: d.lang, system: d.sv, model: d.md, brand: d.br, platform: d.wvv, SDKVersion: l._SDKversion, resolution: d.sw + "x" + d.sh, window: d.ww + "x" + d.wh, ErrStack: e, LogStr: n }; t({ method: "post", url: l.domain_online + "/statistics/clientlog", needPass: !1, data: s, callback: function (e) { var t = JSON.parse(e); c.res_log("Response--clientlog:", t.code, e), 9002 === t.code && a.loginWX() } }) }, ClickOut: function (e, t, o, n, s) { if (e) if (t) { var i = { iconId: e, source: o, target: t, action: !0 === n ? "enable" : "cancel" }; r.statisticsClickOut(i, s) } else console.error("YLSDK toAppId is null !"); else console.error("YLSDK iconId is null !") }, statisticsClickOut: function (e, o) { 0 !== l.switchInfo.switchJump ? t({ method: "post", url: l.domain_online + "/statistics/clickcount", needPass: !0, data: e, callback: function (t) { var n = JSON.parse(t); c.res_log("Response--clickcount:", n.code, t), 0 != n.code && l.statistics.clickcount.push(e), 9002 === n.code && a.loginWX(), o && o(t) } }) : l.switchLog && console.warn("YLSDK \u505c\u7528\u5356\u91cf\u7edf\u8ba1\u63a5\u53e3\uff01") }, statisticShareCard: function (e) { 0 !== l.switchInfo.switchShare ? t({ method: "post", url: l.domain_online + "/statistics/sharecard", needPass: !0, data: e, callback: function (t) { var o = JSON.parse(t); c.res_log("Response--sharecard:", o.code, t), 0 != o.code && l.statistics.sharecard.push(e), 9002 === o.code && a.loginWX() } }) : l.switchLog && console.warn("YLSDK \u505c\u7528\u5206\u4eab\u56fe\u7edf\u8ba1\u63a5\u53e3\uff01") } }, c = { registerInterval: function () { c.unRegisterInterval(), l.switchLog && console.log("YLSDK -----\u6ce8\u518c-\u4e8b\u4ef6\u4e0a\u4f20-\u5b9a\u65f6\u5668-----"), l.s_interval = setInterval(function () { c.sendStatistics() }, l.s_commit_dt, null) }, unRegisterInterval: function () { l.switchLog && console.log("YLSDK -----\u6ce8\u9500-\u4e8b\u4ef6\u4e0a\u4f20-\u5b9a\u65f6\u5668-----"), l.s_interval && clearInterval(l.s_interval), l.s_interval = null }, sendStatistics: function () { if (l.accountPass) { if (l.statistics.events) { var e = l.statistics.events; if (0 !== e.length) if (e.length >= l.s_max_post_l) { for (var t = [], o = 0; o < l.s_max_post_l; o++)t.push(e.shift()); r.statisticsEvents(t) } else r.statisticsEvents(e, !0) } l.statistics.video && l.statistics.video.length > 0 && r.statisticViedo(l.statistics.video.pop()), l.statistics.sharecard && l.statistics.sharecard.length > 0 && r.statisticShareCard(l.statistics.sharecard.pop()), l.statistics.clickcount && l.statistics.clickcount.length > 0 && r.statisticsClickOut(l.statistics.clickcount.pop()), l.statistics.result && l.statistics.result.length > 0 && r.statisticResult(l.statistics.result.pop()), l.statistics.layer && l.statistics.layer.length > 0 && r.statisticsLayer(l.statistics.layer.pop()) } }, saveStatisticsToLocal: function () { if (l.statistics.events.length > l.s_cache_ml) for (var e = l.s_cache_ml; e < l.statistics.events.length; e++)l.statistics.events.shift(); try { wx.setStorageSync("ylsdk_statistics" + o.ylsdk_app_id, JSON.stringify(l.statistics)) } catch (e) { } }, getLocalStatistics: function () { try { var e = wx.getStorageSync("ylsdk_statistics" + o.ylsdk_app_id); return e && 0 !== e.length ? JSON.parse(e) : { events: [], video: [], result: [], sharecard: [], clickcount: [], layer: [] } } catch (e) { } }, clearLocalStatistics: function () { try { wx.setStorageSync("ylsdk_statistics" + o.ylsdk_app_id, "") } catch (e) { } l.statistics = { events: [], video: [], result: [], sharecard: [], clickcount: [], layer: [] } }, clearLocalStatisticsEvents: function () { try { l.statistics.events = [], wx.setStorageSync("ylsdk_statistics" + o.ylsdk_app_id, JSON.stringify(l.statistics)) } catch (e) { } }, randomProbability: function (e) { if (l.switchLog && console.log("YLSDK \u83b7\u53d6\u6982\u7387\u7ed3\u679c---\u6982\u7387:" + e), 100 == e) return !0; if (0 == e) return !1; var t = Math.floor(100 * Math.random()); return l.switchLog && console.log("YLSDK \u83b7\u53d6\u6982\u7387\u7ed3\u679c---\u968f\u673a\u6982\u7387\u503c:" + t), t <= e }, getNextStrategy: function (e) { var t = e + 1; l.switchLog && console.log("YLSDK ----nextStrategyId:", t), t >= l.sharingStrategy.value.length && (t = 0); var o = l.sharingStrategy.value[t]; return 0 == o.num && (l.switchLog && console.log("YLSDK ----num:", o.num, t), t = c.getNextStrategy(t)), t }, SetAccountID: function (e) { l._AccountId = e, c.saveAccountId(e) }, SetAccountPass: function (e) { l.accountPass = e, c.saveAccountPass(e) }, res_log: function (e, t, o) { 0 != t ? console.error("YLSDK ", e + " " + o) : l.switchLog && console.log("YLSDK ", e + " " + o) }, removeItemFrom: function (e) { var t = c.getJumpOutInfo(), n = "" !== t && JSON.parse(t); if (l.boxconfig && l.boxconfig.length > 0 && o.side_min_num < l.boxconfig.length) { for (var s = 0; s < l.boxconfig.length; s++) { var i = l.boxconfig[s]; if (i.toAppid === e && 0 == i.innerStatus) { l.switchLog && console.log("YLSDK \u9690\u85cf\u5bf9\u5e94appid\u7684\u6240\u6709icon--id:", i._id), l.boxconfig.splice(s, 1); var a = !1, r = new Date; if (n && n.list && n.list.length > 0) for (var d = 0; d < n.list.length; d++)n.list[d].appid == e && (a = !0); else n = { list: [] }; a || n.list.push({ appid: e }), n.date = r.getTime() } } c.saveJumpOutInfo(JSON.stringify(n)) } }, saveAccountPass: function (e) { a.saveLocalData("SDK_ACCOUNT_PASS" + o.ylsdk_app_id, "" + e), l.switchLog && console.log("YLSDK ---\u8bbe\u7f6e\u7f13\u5b58AccountPass:", e) }, getAccountPass: function () { var e = a.getLocalData("SDK_ACCOUNT_PASS" + o.ylsdk_app_id); return l.switchLog && console.log("YLSDK ---\u83b7\u53d6\u7f13\u5b58AccountPass:", e), e }, saveAccountId: function (e) { a.saveLocalData("SDK_ACCOUNT_ID" + o.ylsdk_app_id, "" + e), l.switchLog && console.log("YLSDK ---\u8bbe\u7f6e\u7f13\u5b58account_id:", e) }, getAccountId: function () { var e = a.getLocalData("SDK_ACCOUNT_ID" + o.ylsdk_app_id); return l.switchLog && console.log("YLSDK ---\u83b7\u53d6\u7f13\u5b58account_id:", e), e }, saveJumpOutInfo: function (e) { a.saveLocalData("SDK_JUMP_ICON" + o.ylsdk_app_id, e), l.switchLog && console.log("YLSDK ---\u8bbe\u7f6e\u5356\u91cf\u8df3\u8f6c\u8bb0\u5f55:", e) }, getJumpOutInfo: function () { var e = a.getLocalData("SDK_JUMP_ICON" + o.ylsdk_app_id); return l.switchLog && console.log("YLSDK ---\u83b7\u53d6\u5356\u91cf\u8df3\u8f6c\u8bb0\u5f55:", e), e }, saveUserWXInfo: function (e) { a.saveLocalData("SDK_USER_WX_INFO" + o.ylsdk_app_id, e), l.switchLog && console.log("YLSDK ---\u8bbe\u7f6e\u7528\u6237\u5fae\u4fe1\u4fe1\u606f\u672c\u5730\u7f13\u5b58:", e) }, getUserWXInfo: function () { var e = a.getLocalData("SDK_USER_WX_INFO" + o.ylsdk_app_id); return l.switchLog && console.log("YLSDK ---\u83b7\u53d6\u7528\u6237\u5fae\u4fe1\u4fe1\u606f\u672c\u5730\u7f13\u5b58:", e), e }, checkJumpOutTime: function () { var e = new Date, t = e.getDate(), o = e.getMonth(), n = e.getFullYear(), s = c.getJumpOutInfo(), i = "" !== s && JSON.parse(s); if (i && i.date) { var a = new Date(i.date), r = a.getDate(), l = a.getMonth(); n == a.getFullYear() && o == l && r == t || c.saveJumpOutInfo("") } }, getSharingResults: function (e, t) { if (shareSuccess = !1, l.sharingStrategy) { var o = l.sharingStrategy.strategy_id, n = l.sharingStrategy.value[o], s = l.sharingStrategy.time_id; if (l.switchLog && console.log("YLSDK ---\u7b56\u7565:[" + o + " - " + s + "],time_space:" + e, JSON.stringify(n)), n.time && s < n.time.length) { var i = n.time[s], a = n.prob[s]; if (i && i.length > 1) for (var r = 1; r < i.length; r++)if (e >= i[r - 1] && e <= i[r]) { var d = a[r - 1]; shareSuccess = c.randomProbability(d) } else if (r == i.length - 1 && e > i[r]) { var u = a[r]; shareSuccess = c.randomProbability(u) } } s += 1, shareSuccess ? (l.sharingStrategy.time_id = 0, l.sharingStrategy.count += 1) : s >= n.time.length ? (l.sharingStrategy.time_id = 0, l.sharingStrategy.count += 1) : l.sharingStrategy.time_id = s, l.sharingStrategy.count >= n.num && (l.sharingStrategy.count = 0, l.sharingStrategy.strategy_id = c.getNextStrategy(o)) } t && t(shareSuccess) }, base64_encode: function (e) { for (var t, o, n, s = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", i = 0, a = e.length, r = ""; i < a;) { if (t = 255 & e.charCodeAt(i++), i == a) { r += s.charAt(t >> 2), r += s.charAt((3 & t) << 4), r += "=="; break } if (o = e.charCodeAt(i++), i == a) { r += s.charAt(t >> 2), r += s.charAt((3 & t) << 4 | (240 & o) >> 4), r += s.charAt((15 & o) << 2), r += "="; break } n = e.charCodeAt(i++), r += s.charAt(t >> 2), r += s.charAt((3 & t) << 4 | (240 & o) >> 4), r += s.charAt((15 & o) << 2 | (192 & n) >> 6), r += s.charAt(63 & n) } return r }, statisticsPlayTime: function () { var e = (new Date).getTime(); l.lastTime || (l.lastTime = e); var t = e - l.lastTime, o = { event: "play_time", scene: l.layer ? l.layer : "default", tp: t, time: e }; r.statisticsEvents([o]) }, statisticsBannerClick: function () { var e = (new Date).getTime(), t = { event: "banner_click", scene: l.layer ? l.layer : "default", time: e }; r.statisticsEvents([t]) } }, l = { _SDKversion: "1.0.2", ylsdk_pkg_name: "", ylsdk_platform: "0", domain_online: "https://api.ylxyx.cn/api/collect/v1", _AccountId: "", login_count: 0, accountPass: null, user_wx_info: null, bannerAd: null, videoAd: null, switchInfo: { switchTouch: 0, switchPush: 0, switchLogin: 1, switchJump: 1, switchShare: 1, switchEvent: 1, switchLayer: 1, switchResult: 1, switchVideo: 1 }, banner_time_space: 3, switchLog: !1, need_statistics_on_show: !0, show_video: !1, show_share: !1, show_banner: !1, boxconfig: null, boardconfig: null, custom: null, sharingStrategy: null, signConfig: null, invite_account: -1, loginInfo: null, sharecard_config: null, sharecard_scene: null, is_debug: !1, statistics: { events: [], video: [], result: [], sharecard: [], clickcount: [], layer: [] }, s_commit_dt: 3e3, s_cache_ml: 1e4, s_max_post_l: 50, s_interval: null, layer: null, VIDEO_PLAY_FAIL: 0, VIDEO_PLAY_FINISH: 1, VIDEO_PLAY_CANCEL: 2 }, d = {}; try { var u = wx.getSystemInfoSync(); d.br = u.brand || "", d.md = u.model, d.pr = u.pixelRatio, d.sw = u.screenWidth, d.sh = u.screenHeight, d.ww = u.windowWidth, d.wh = u.windowHeight, d.lang = u.language, d.wv = u.version, d.sv = u.system, d.wvv = u.platform, d.fs = u.fontSizeSetting, d.wsdk = u.SDKVersion, d.bh = u.benchmarkLevel || "", d.bt = u.battery || "", d.wf = u.wifiSignal || "" } catch (e) { console.log("YLSDK exception--e:", e) } l.switchLog = o.ylsdk_debug_model, wx.onShow(function (e) { if (l.switchLog && console.log("YLSDK -----wx.onShow-----", d.wvv), l.statistics = c.getLocalStatistics(), c.registerInterval(), l.show_banner && !l.show_share && !l.show_video) { var t = (new Date).getTime(); l.hideTime && t - l.hideTime <= 1e3 * l.banner_time_space && c.statisticsBannerClick() } if (l.onShare) { l.show_share = !1; var o = (new Date).getTime() - l.onShare.showTime; c.getSharingResults(o, function (e) { l.switchLog && console.warn("YLSDK \u672c\u6b21\u5206\u4eab" + (e ? "\u6210\u529f" : "\u5931\u8d25")), l.shareCallBack && l.shareCallBack(e), l.shareCallBack = null }), l.onShare = null } l.accountPass ? l.lastTime = (new Date).getTime() : l.need_statistics_on_show = !0 }), wx.onHide(function () { l.switchLog && console.log("YLSDK -----wx.onHide-----"), l.hideTime = (new Date).getTime(), c.unRegisterInterval(), c.saveStatisticsToLocal(), r.commitStaticsLayer(), c.statisticsPlayTime() }), wx.onError(function (e) { var t = JSON.stringify(e); l.ERROR_LOG && l.ERROR_LOG === t || (console.error("YLSDK -------onError-----------", e), l.ERROR_LOG = t, r.commitStaticsErrStack("", e)) }) }();